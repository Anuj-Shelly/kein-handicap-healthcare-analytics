----------------------------------------------
Kein Handicap Healthcare Analytics - Power BI
DAX Measures (excerpt from reporting model)
----------------------------------------------

-- Total Patient Visits (used on KPI card + trend charts)
Total Patient Visits =
SUM('CareMetrics'[Patient_Visits])

-- Avg Care Hours per Patient
Avg Care Hours =
AVERAGE('CareMetrics'[Avg_Care_Hours])

-- Avg Staff Utilization %
Avg Staff Utilization % =
AVERAGE('CareMetrics'[Staff_Utilization_%])

-- Patient Satisfaction (1-10)
Avg Satisfaction Score =
ROUND(AVERAGE('CareMetrics'[Satisfaction_Score]), 1)

-- Visit Growth vs Previous Period (used for ops review)
Visit Change % =
VAR PrevPeriod =
    CALCULATE(
        SUM('CareMetrics'[Patient_Visits]),
        DATEADD('CareMetrics'[Date], -4, WEEK)  -- compare to 4 weeks ago
    )
VAR CurrPeriod =
    SUM('CareMetrics'[Patient_Visits])
RETURN
    DIVIDE(CurrPeriod - PrevPeriod, PrevPeriod, 0)

-- Care Efficiency Index
-- Higher = more patients served per care hour
Care Efficiency Index =
DIVIDE(
    SUM('CareMetrics'[Patient_Visits]),
    SUM('CareMetrics'[Avg_Care_Hours]),
    0
)

-- Weighted Satisfaction (volume-adjusted)
Satisfaction Index =
DIVIDE(
    SUMX(
        'CareMetrics',
        'CareMetrics'[Satisfaction_Score] * 'CareMetrics'[Patient_Visits]
    ),
    SUM('CareMetrics'[Patient_Visits]),
    0
)
